2025-12-01 23:09:42,294 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 49, in process
    repaired = repair_pipeline({'members': payload_entities.get('members', payload_entities if isinstance(payload_entities, list) else [])})
                                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 52, in process
    members = payload_entities.get('members', payload_entities if isinstance(payload_entities, list) else [])
              ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
2025-12-01 23:10:02,877 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 82, in process
    prof = classify_section(m)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/section_classifier.py", line 15, in classify_section
    prof = profile_mapper(name, layer=layer, annotations=ann)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/profile_db.py", line 68, in profile_mapper
    qnorm = normalize_name(query or "")
  File "/Users/sahil/Documents/aibuildx/src/pipeline/profile_db.py", line 55, in normalize_name
    return re.sub(r"[^A-Za-z0-9]+", "", name).upper()
           ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/re/__init__.py", line 208, in sub
    return _compile(pattern, flags).sub(repl, string, count)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
TypeError: expected string or bytes-like object, got 'dict'
2025-12-01 23:10:22,247 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 88, in process
    mat = classify_material(m)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/material_classifier.py", line 11, in classify_material
    mat_norm = mat.strip()
               ^^^^^^^^^
AttributeError: 'dict' object has no attribute 'strip'
2025-12-03 18:29:42,853 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1038, in extract_from_dxf
    return miner_from_dxf(path_or_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1084, in miner_from_dxf
    members.append({'id': str(uuid.uuid4()), 'start': ent['start'], 'end': ent['end'], 'length': length(ent['start'], ent['end']), 'layer': ent.get('layer')})
                                                      ~~~^^^^^^^^^
TypeError: string indices must be integers, not 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 36, in process
    payload_entities = legacy.extract_from_dxf(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1040, in extract_from_dxf
    raise RuntimeError('miner.extract_from_dxf not available and fallback failed')
RuntimeError: miner.extract_from_dxf not available and fallback failed
2025-12-03 18:31:56,341 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1038, in extract_from_dxf
    return miner_from_dxf(path_or_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1084, in miner_from_dxf
    members.append({'id': str(uuid.uuid4()), 'start': ent['start'], 'end': ent['end'], 'length': length(ent['start'], ent['end']), 'layer': ent.get('layer')})
                                                      ~~~^^^^^^^^^
TypeError: string indices must be integers, not 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 36, in process
    payload_entities = legacy.extract_from_dxf(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1040, in extract_from_dxf
    raise RuntimeError('miner.extract_from_dxf not available and fallback failed')
RuntimeError: miner.extract_from_dxf not available and fallback failed
2025-12-03 18:32:10,051 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1038, in extract_from_dxf
    return miner_from_dxf(path_or_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1084, in miner_from_dxf
    members.append({'id': str(uuid.uuid4()), 'start': ent['start'], 'end': ent['end'], 'length': length(ent['start'], ent['end']), 'layer': ent.get('layer')})
                                                      ~~~^^^^^^^^^
TypeError: string indices must be integers, not 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 36, in process
    payload_entities = legacy.extract_from_dxf(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1040, in extract_from_dxf
    raise RuntimeError('miner.extract_from_dxf not available and fallback failed')
RuntimeError: miner.extract_from_dxf not available and fallback failed
2025-12-03 18:34:31,352 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1041, in extract_from_dxf
    import ezdxf
ModuleNotFoundError: No module named 'ezdxf'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 36, in process
    payload_entities = legacy.extract_from_dxf(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/pipeline_v2.py", line 1081, in extract_from_dxf
    raise RuntimeError(f'Failed to parse DXF file: {str(e)}')
RuntimeError: Failed to parse DXF file: No module named 'ezdxf'
2025-12-03 18:36:51,226 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 25, in parse_dxf_file
    import ezdxf
ModuleNotFoundError: No module named 'ezdxf'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 29, in process
    payload_entities = parse_dxf_file(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 27, in parse_dxf_file
    raise RuntimeError("ezdxf is required for DXF parsing. Install with: pip install ezdxf")
RuntimeError: ezdxf is required for DXF parsing. Install with: pip install ezdxf
2025-12-03 18:37:03,384 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 25, in parse_dxf_file
    import ezdxf
ModuleNotFoundError: No module named 'ezdxf'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 29, in process
    payload_entities = parse_dxf_file(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 27, in parse_dxf_file
    raise RuntimeError("ezdxf is required for DXF parsing. Install with: pip install ezdxf")
RuntimeError: ezdxf is required for DXF parsing. Install with: pip install ezdxf
2025-12-03 18:37:48,668 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 116, in ascii_tags_loader
    group_code = int(code)
ValueError: invalid literal for int() with base 10: '(approx. modelling time: 2-4 hours)\n'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 29, in process
    payload_entities = parse_dxf_file(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 30, in parse_dxf_file
    doc = ezdxf.readfile(file_path)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/filemanagement.py", line 154, in readfile
    doc = read(fp)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/filemanagement.py", line 95, in read
    return Drawing.read(stream)
           ~~~~~~~~~~~~^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 350, in read
    return cls.load(tag_loader)
           ~~~~~~~~^^^^^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 365, in load
    doc._load(tag_loader)
    ~~~~~~~~~^^^^^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 378, in _load
    sections = loader.load_dxf_structure(tagger)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/loader.py", line 91, in load_dxf_structure
    for entity in group_tags(tagger):
                  ~~~~~~~~~~^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tags.py", line 321, in group_tags
    for tag in tags:
               ^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 290, in tag_compiler
    x = next(tags)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 118, in ascii_tags_loader
    raise DXFStructureError(f'Invalid group code "{code}" at line {line}.')
ezdxf.lldxf.const.DXFStructureError: Invalid group code "(approx. modelling time: 2-4 hours)
" at line 471.
2025-12-03 18:38:36,807 [ERROR] aibuildx.main_pipeline_agent: Pipeline agent processing failed
Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 116, in ascii_tags_loader
    group_code = int(code)
ValueError: invalid literal for int() with base 10: '(approx. modelling time: 2-4 hours)\n'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 31, in parse_dxf_file
    doc = ezdxf.readfile(file_path)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/filemanagement.py", line 154, in readfile
    doc = read(fp)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/filemanagement.py", line 95, in read
    return Drawing.read(stream)
           ~~~~~~~~~~~~^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 350, in read
    return cls.load(tag_loader)
           ~~~~~~~~^^^^^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 365, in load
    doc._load(tag_loader)
    ~~~~~~~~~^^^^^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/document.py", line 378, in _load
    sections = loader.load_dxf_structure(tagger)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/loader.py", line 91, in load_dxf_structure
    for entity in group_tags(tagger):
                  ~~~~~~~~~~^^^^^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tags.py", line 321, in group_tags
    for tag in tags:
               ^^^^
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 290, in tag_compiler
    x = next(tags)
  File "/Users/sahil/Documents/aibuildx/path/to/venv/lib/python3.14/site-packages/ezdxf/lldxf/tagger.py", line 118, in ascii_tags_loader
    raise DXFStructureError(f'Invalid group code "{code}" at line {line}.')
ezdxf.lldxf.const.DXFStructureError: Invalid group code "(approx. modelling time: 2-4 hours)
" at line 471.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/sahil/Documents/aibuildx/src/pipeline/agents/main_pipeline_agent.py", line 29, in process
    payload_entities = parse_dxf_file(dxf_entities)
  File "/Users/sahil/Documents/aibuildx/src/pipeline/dxf_parser.py", line 35, in parse_dxf_file
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Invalid DXF file format. The file appears to be corrupted or contains non-DXF content. Please ensure the file is a valid DXF file exported from CAD software. Error: Invalid group code "(approx. modelling time: 2-4 hours)
" at line 471.
